<p id="notice"><%= notice %></p>

<h1>Lista de Productos</h1>

<%= button_to "Búsqueda avanzada", new_search_path, method: 'get', :class => 'btn btn-danger'%>
<%= form_tag products_path, method: 'get' do %>
  <%= text_field_tag :search, params[:search] %>
  <%= submit_tag "Buscar" ,:class => 'btn btn-secondary'%>
<% end %>


<br>
<%= button_to 'Categorías', categories_path , method: 'get',:class => 'btn btn-primary'%>
<br>
<table>
  <thead>
    <tr>
      <th>Nombre</th>
      <th>Descripción</th>
      <th>Cantidad</th>
      <th>Precio</th>
      <th>Disponible</th>
      <th>Categoría</th>
      <th>Imagen</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @products.each do |product| %>
      <tr>
        <td><%= product.name %></td>
        <td><%= product.description %></td>
        <td><%= product.quantity %></td>
        <td><%= product.price %></td>
        <td><%= product.available %></td>
        <td><%= product.category.name %></td>
        <td><%= image_tag product.picture.url, style: 'height:100px; width:100px;'%></td>
        <td><%= button_to 'Mostar', product_path(product), method: 'get' ,:class => 'btn btn-info'%></td>
        <% if user_signed_in? %>
        <td><%= button_to 'Editar', edit_product_path(product), method: 'get' ,:class => 'btn btn-warning'%></td>
        <td><%= button_to 'Eliminar', product_path(product), method: 'delete', data: { confirm: '¿Estás seguro?' } ,:class => 'btn btn-danger'%></td>
          <% end %>
      </tr>
    <% end %>
  </tbody>
</table>

<br>

<% if user_signed_in? %>
<%= button_to 'Nuevo Producto', new_product_path , method: 'get' ,:class => 'btn btn-success'%> <br>
  <% end %>
<%= button_to 'Inicio', home_index_path, method: 'get' ,:class => 'btn btn-primary'%>


